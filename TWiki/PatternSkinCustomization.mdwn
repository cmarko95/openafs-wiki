# <a name="TWiki._PatternSkin Customization"></a><a name=" TWiki._PatternSkin Customizatio"></a> [[PatternSkin]] Customization

**Questions and answers on configuring page elements.** For styling your TWiki, see [[PatternSkinCssCookbook]].

<div>
  <ul>
    <li><a href="#First Read: How to modify _Patt"> First Read: How to modify PatternSkin templates</a></li>
    <li><a href="#Logo"> Logo</a><ul>
        <li><a href="#How can I change the web logo?"> How can I change the web logo?</a></li>
        <li><a href="#How do I set a site-wide logo?"> How do I set a site-wide logo?</a></li>
        <li><a href="#My logo does not fit the top bar"> My logo does not fit the top bar</a></li>
        <li><a href="#I want to change the white space"> I want to change the white space above and below the logo</a></li>
      </ul>
    </li>
    <li><a href="#Top bar"> Top bar</a><ul>
        <li><a href="#I want to set or change the top"> I want to set or change the top background image</a></li>
        <li><a href="#I want to have the web color in"> I want to have the web color in the top bar</a></li>
        <li><a href="#I want to remove the Jump and Se"> I want to remove the Jump and Search boxes from the top bar </a></li>
        <li><a href="#I want to hide the top bar"> I want to hide the top bar</a></li>
      </ul>
    </li>
    <li><a href="#Left bar"> Left bar</a><ul>
        <li><a href="#I want to hide the left bar"> I want to hide the left bar</a></li>
      </ul>
    </li>
    <li><a href="#Other page parts"> Other page parts</a><ul>
        <li><a href="#I want to hide the edit buttons"> I want to hide the edit buttons from certain users</a></li>
        <li><a href="#I want to remove the History but"> I want to remove the History button from the bottom</a></li>
        <li><a href="#I want to insert text outside of"> I want to insert text outside of the topic content</a></li>
      </ul>
    </li>
  </ul>
</div>

## <a name="First Read: How to modify _Patte"></a> First Read: How to modify PatternSkin templates

If you need to change any of the elements that are visible on the common 'view' pages, you need to change the 'view' _template_: `/templates/view.pattern.tmpl`. The quickest way would be to simply change the text in the template. A safer way - strongly recommended, because it will survive a TWiki update - is to create your own custom skin. That may sound like an awful lot of work, but in reality a skin may be as much as 1 file that consists of only a few lines of code.

**Example** %BR% Let's say you want to simplify the bottom toolbar and remove all links except for "More topic actions". You would need to target `%TMPL:DEF{"topicactionbuttons"}%`, which is located in `view.pattern.tmpl`.

**The steps you would need:**

1. Think up a name for your skin. Let us use `myskin` for now.
2. Create a new (empty) view template file in `/templates` called `view.myskin.tmpl`.
3. In `view.myskin.tmpl` you write: %BR% `%TMPL:INCLUDE{"view"}%` %BR% `%TMPL:DEF{"topicactionbuttons"}%%TMPL:P{"activatable_more"}%%TMPL:END%`
4. Now the skin is set. For testing, view any topic and append to the topic name: `?cover=myskin`. You should see an effect now.
5. To make the changes visible on all pages, go to [[Main.TWikiPreferences|Main/TWikiPreferences]] (to keep [[TWikiPreferences]] intact) and write:

> * Set COVER = myskin
>
> or write
>
>        * Set SKIN = myskin,pattern

## <a name="Logo"></a> Logo

### <a name="How can I change the web logo?"></a> How can I change the web logo?

By default the logo at the top left of each web points to the image with name `logo.gif` that is attached to each web's [[WebPreferences]]. <br /> The default variables that cause this behavior are defined in [[TWikiPreferences]].

Redefine your custom variables in [[Main.TWikiPreferences|Main/TWikiPreferences]] (to keep [[TWikiPreferences]] intact):

> * Set WEBLOGONAME = logo.gif
>        * Set WEBLOGOIMG = %PUBURLPATH%/%BASEWEB%/%WEBPREFSTOPIC%/%WEBLOGONAME%
>        * Set WEBLOGOURL = %SCRIPTURLPATH{"view"}%/%BASEWEB%/%HOMETOPIC%
>        * Set WEBLOGOALT = Home

There are 2 ways to change the logo in a web:

**Using logo.gif:**

> - Create a new image named `logo.gif` and attach it to the web's [[WebPreferences]] topic. [[PatternSkin]]'s stylesheet assumes the logo is 40px high. More about that later.
> - You can also upload the image with FTP to `/pub/YourWeb/WebPreferences/`.
> - Copy the above instructions ("Redefine your custom variables") and insert your logo name.

**Using a new filename:**

> - Attach whatever image and attach it to the web's [[WebPreferences]] topic. Then add to the [[WebPreferences]] (under _Custom web preferences_):
>
>           * Set WEBLOGONAME = your-logo-name.gif-or-png
>
> - Copy the above instructions ("Redefine your custom variables") and insert your logo name.

### <a name="How do I set a site-wide logo?"></a> How do I set a site-wide logo?

There is a bunch of site-wide logo variables in [[Main.TWikiPreferences|Main/TWikiPreferences]]: `WIKILOGOIMG`, `WIKILOGOURL` and `WIKILOGOALT`. To change only the web logo image to site-wide, in [[Main.TWikiPreferences|Main/TWikiPreferences]] set:

> * Set WEBLOGOIMG = %WIKILOGOIMG%

### <a name="My logo does not fit the top bar"></a> My logo does not fit the top bar

The top bar is 64 pixels high by default.

**Using templates:**

> Change the height of the top bar in
>
> `templates/viewtopbar.pattern.tmpl`
>
> :
>
>     %TMPL:DEF{"topbardimensions"}%
>     #patternTopBar,
>     #patternClearHeaderCenter,
>     #patternClearHeaderLeft,
>     #patternClearHeaderRight,
>     #patternTopBarContentsOuter {
>     	height:64px; /* top bar height; make room for header columns */
>     	overflow:hidden;
>     }
>     %TMPL:END%
>
> Only change the number from 64px to another value.

**Using style sheets:**

> Create a new stylesheet with above definition in it, attach it to a topic and point
>
> `USERLAYOUTURL`
>
> to that topic attachment. See
>
> [[PatternSkinCssCookbook]]
>
> about creating custom styles.

### <a name="I want to change the white space"></a> I want to change the white space above and below the logo

Change the table style in topic [[WebTopBar]]. The default top padding is 11px.

## <a name="Top bar"></a> Top bar

### <a name="I want to set or change the top"></a><a name="I want to set or change the top "></a> I want to set or change the top background image

The image at the top is called "header art" - commonly the top image found on blog sites. The image that is displayed by default is set by the variable `WEBHEADERART`, defined in [[TWikiPreferences]].

Redefine your custom variables in [[Main.TWikiPreferences|Main/TWikiPreferences]] (to keep [[TWikiPreferences]] intact):

> * Set WEBHEADERART = %PUBURLPATH%/%TWIKIWEB%/PatternSkin/TWiki_header.gif
>        * Set WEBHEADERBGCOLOR = somehexcolor (no quotes, for example: #ffffff)

You can also set `WEBHEADERART` per web, by defining the variable in the Web's WebPreferences.

### <a name="I want to have the web color in"></a><a name="I want to have the web color in "></a> I want to have the web color in the top bar

Redefine `WEBHEADERBGCOLOR` in [[Main.TWikiPreferences|Main/TWikiPreferences]] (to keep [[TWikiPreferences]] intact):

> * Set WEBHEADERBGCOLOR = %WEBBGCOLOR%

### <a name="I want to remove the Jump and Se"></a> I want to remove the Jump and Search boxes from the top bar

If you have localization enabled, you will also see a language dropdown box at the far right.

You can remove these items from [[WebTopBar]].

### <a name="I want to hide the top bar"></a> I want to hide the top bar

**Using templates:**

The view template is populated with page elements using template inclusions:

    %TMPL:INCLUDE{"page"}%
    %TMPL:INCLUDE{"viewtopbar"}%
    %TMPL:INCLUDE{"viewtoolbar"}%
    %TMPL:INCLUDE{"viewleftbar"}%
    %TMPL:INCLUDE{"viewrightbar"}%
    %TMPL:INCLUDE{"viewtopicactionbuttons"}%
    %TMPL:INCLUDE{"viewbottombar"}%

Each included template draws a part of the screen.%BR% Omit `%TMPL:INCLUDE{"viewtopbar"}%` to hide the top bar.

Another approach is to clear the contents of module `topbar`; for example in `view.myskin.tmpl`:

> %TMPL:INCLUDE{"view"}%
>
>     %TMPL:INCLUDE{"topbar"}%%TMPL:END%
>
> and add:
>
>     %TMPL:DEF{"topbardimensions"}%#patternTopBar,
>     #patternClearHeaderCenter,
>     #patternClearHeaderLeft,
>     #patternClearHeaderRight,
>     #patternTopBarContentsOuter {
>     	height:0px;
>     }%TMPL:END%

**Using style sheets:**

> See
>
> [[PatternSkinCssCookbookNoTopBar]]
>
> .

## <a name="Left bar"></a> Left bar

### <a name="I want to hide the left bar"></a> I want to hide the left bar

**Using templates:**

> Omit
>
> `%TMPL:INCLUDE{"viewleftbar"}%`
>
> to hide the left bar, or in a view template clear it using
>
> `%TMPL:DEF{"viewleftbar"}%%TMPL:END%`

**Using style sheets:**

> See
>
> [[PatternSkinCssCookbookNoLeftBar]]
>
> .

## <a name="Other page parts"></a> Other page parts

### <a name="I want to hide the edit buttons"></a><a name="I want to hide the edit buttons "></a> I want to hide the edit buttons from certain users

It may defy the wiki-ness of your TWiki installation, but in certain circumstances it could be useful to hide the edit buttons from users that are not logged in, for instance for customers.

Create in the template directory the file `view.customer.tmpl`. 'Empty' `topicaction` and `toolbar` by writing in the template:

> %TMPL:INCLUDE{"view"}%
>     %TMPL:DEF{"topicaction"}%%TMPL:END%
>     %TMPL:DEF{"toolbar"}%%TMPL:END%

In [[TWikiGuest]], set the cover to

> * Set COVER = customer

By default this topic is editable only by TWikiAdminGroup members.

### <a name="I want to remove the History but"></a> I want to remove the History button from the bottom

All action buttons are defined in `viewtopicactionbuttons.pattern.tmpl`. Remove module `revisions` from `%TMPL:DEF{"topicactionbuttons"}%`. %BR%

> <code> %TMPL:DEF\{"topicactionbuttons"\}%%TMPL:P\{"activatable\_raw\_edit"\}%%TMPL:P\{"sep"\}% %TMPL:P\{context="WysiwygPluginEnabled" then="activatable\_edit\_wysiwyg"\}%%TMPL:P\{context="WysiwygPluginEnabled" then="sep"\}% %TMPL:P\{"activatable\_attach"\}%%TMPL:P\{"sep"\}% %TMPL:P\{"printable"\}%%TMPL:P\{"sep"\}% %TMPL:P\{"raw"\}%%TMPL:P\{"sep"\}% %TMPL:P\{"backlinks"\}%%TMPL:P\{"sep"\}% <span><font><s>%TMPL:P\{"revisions"\}%%TMPL:P\{"sep"\}%</s></font></span> %TMPL:P\{"activatable\_more"\}%%TMPL:END% </code>

In your `view.myskin.tmpl` file (see above) you write:

> %TMPL:INCLUDE{"view"}%
>
>     %TMPL:DEF{"topicactionbuttons"}% |
>     %TMPL:P{context="WysiwygPluginEnabled" then="activatable_edit_wysiwyg"}%
>     %TMPL:P{"activatable_attach"}% |
>     %TMPL:P{"printable"}% |
>     %TMPL:P{"raw"}% |
>     %TMPL:P{"backlinks"}% |
>     %TMPL:P{"activatable_more"}%%TMPL:END%
>
> Remove all newlines if you copy-paste above text.

Test by appending `?cover=myskin` to any topic.

### <a name="I want to insert text outside of"></a> I want to insert text outside of the topic content

PatternSkin has 2 'buckets' to write additional content to: `beforetextcontents` and `aftertextcontents`, both defined in `view.pattern.tmpl`. These containers can contain text or html and are placed directly before and after the topic text.

Both modules are wrapped in CSS containers:

- `beforetextcontents` - wrapped in `div` of class `twikiBeforeText`
- `aftertextcontents` - wrapped in `div` of class `twikiAfterText`

To put contents before the main text, use the custom skin approach as described above.%BR% So our `view.myskin.tmpl` file contains:

> %TMPL:INCLUDE{"view"}%
>
>     %TMPL:DEF{"beforetextcontents"}%This is the text before%TMPL:END%

Test by appending `?cover=myskin` to any topic.

Use the same procedure for contents to be put after the topic text:

> %TMPL:INCLUDE{"view"}%
>
>     %TMPL:DEF{"aftertextcontents"}%This is the text after%TMPL:END%
