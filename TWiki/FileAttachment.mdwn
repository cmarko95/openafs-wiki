<div>
  <ul>
    <li><a href="#File Attachments"> File Attachments</a><ul>
        <li><a href="#What Are Attachments Good For?"> What Are Attachments Good For?</a><ul>
            <li><a href="#Document Management System"> Document Management System</a></li>
            <li><a href="#File Sharing"> File Sharing</a></li>
            <li><a href="#Web Authoring"> Web Authoring</a></li>
          </ul>
        </li>
        <li><a href="#Uploading Files"> Uploading Files</a></li>
        <li><a href="#Downloading Files"> Downloading Files</a></li>
        <li><a href="#Moving Attachment Files"> Moving Attachment Files</a></li>
        <li><a href="#Deleting Attachments"> Deleting Attachments</a></li>
        <li><a href="#Linking to Attached Files"> Linking to Attached Files</a></li>
        <li><a href="#File Attachment Contents Table"> File Attachment Contents Table</a></li>
        <li><a href="#File Attachment Controls"> File Attachment Controls</a></li>
        <li><a href="#Known Issues"> Known Issues</a></li>
      </ul>
    </li>
  </ul>
</div>

# <a name="File Attachments"></a> File Attachments

_Each topic can have one or more files of any type attached to it by using the Attach screen to upload (or download) files from your local PC. Attachments are stored under revision control: uploads are automatically backed up; all previous versions of a modified file can be retrieved._

## <a name="What Are Attachments Good For?"></a> What Are Attachments Good For?

File Attachments can be used to create powerful customized groupware solutions, like file sharing and document management systems, and quick Web page authoring.

### <a name="Document Management System"></a> Document Management System

- You can use Attachments to store and retrieve documents (in any format, with associated graphics, and other media files); attach documents to specific TWiki topics; collaborate on documents with full revision control; distribute documents on a [[need-to-know basis|Main/WebHome#AttachmentAccess]] using web and topic-level access control; create a central reference library that's easy to share with an user group spread around the world.

### <a name="File Sharing"></a> File Sharing

- For file sharing, [[FileAttachments]] on a series of topics can be used to quickly create a well-documented, categorized digital download center for all types of files: documents; graphics and other media; drivers and patches; applications; anything you can safely upload!

### <a name="Web Authoring"></a> Web Authoring

- Through your Web browser, you can easily upload graphics (or sound files, or anything else you want to link to on a page) and place them on a single page, or use them across a web, or site-wide.
  - **_NOTE:_** You can also add graphics - any files - directly, typically by FTP upload. This requires FTP access, and may be more convenient if you have a large number of files to load. FTP-ed files can't be managed using browser-based Attachment controls. You can use your browser to create [[TWikiVariables]] shortcuts, like this %H% = %H%.

## <a name="Uploading Files"></a> Uploading Files

- Click on the <code>**Attach**</code> link at the bottom of the page. The `Attach` screen lets you browse for a file, add a comment, and upload it. The uploaded file will show up in the [[File Attachment table|Main/WebHome#FileAttachmentTable]].
  - **_NOTE:_** The topic must already exist. It is a two step process if you want to attach a file to a non-existing topic; first create the topic, then add the file attachment.
  - Any type of file can be uploaded. Some files that might pose a security risk are renamed, ex: `*.php` files are renamed to `*.php.txt` so that no one can place code that would be read in a .php file.
  - The previous upload path is retained for convenience. In case you make some changes to the local file and want to upload it, again you can copy the previous upload path into the Local file field.
  - TWiki can limit the file size. This is defined by the `%ATTACHFILESIZELIMIT%` variable of the [[TWikiPreferences]], currently set at %ATTACHFILESIZELIMIT% KB.
    - %X% It's not recommended to upload files greater than a few hundred K through a browser. Large files can be extremely slow-loading, and often time out. Use an FTP site for large file uploads.

## <a name="Downloading Files"></a> Downloading Files

- Click on the file in the [[File Attachment table|Main/WebHome#FileAttachmentTable]].

<a name="AttachmentAccess"></a>

- %X% _NOTE:_ There is no access control on individual attachments. If you need control over single files, create a separate topic per file and set topic-level [[access restrictions|Main/TWikiDocumentation#TWikiAccessControl]] for each.

## <a name="Moving Attachment Files"></a> Moving Attachment Files

An attachment can be moved between topics.

- Click <code>**Manage**</code> on the Attachment to be moved.
- On the control screen, select the new web and/or topic.
- Click <code>**Move**</code>. The attachment and its version history are moved. The original location is stored as [[topic Meta Data|Main/TWikiDocumentation#Meta_Data_Definition]].

## <a name="Deleting Attachments"></a> Deleting Attachments

Move unwanted Attachments to web `Trash`, topic `TrashAttachment`.

## <a name="Linking to Attached Files"></a> Linking to Attached Files

- Once a file is attached it can be referenced in the topic. Example:
  1. <code>**Attach**</code> file: `Sample.txt`
  2. <code>**Edit**</code> topic and enter: `%ATTACHURL%/Sample.txt`
  3. <code>**Preview**</code>: `%ATTACHURL%/Sample.txt` text appears as: <http://www.dementia.org/twiki//view/%WEB%/%TOPIC%/Sample.txt>, a link to the text file.

- To reference an attachment located in another topic, enter:
  - `%PUBURL%/%WEB%/OtherTopic/Sample.txt` (if it's within the same web)
  - `%PUBURL%/Otherweb/OtherTopic/Sample.txt` (if it's in a different web)

- Attached HTML files and text files can be inlined in a topic. Example:
  1. <code>**Attach**</code> file: `Sample.txt`
  2. <code>**Edit**</code> topic and write text: `%INCLUDE{"%ATTACHURL%/Sample.txt"}%`
    - Content of attached file is shown inlined.
    - Read more in [[IncludeTopicsAndWebPages]].

- GIF, JPG and PNG images can be attached and shown embedded in a topic. Example:
  1. <code>**Attach**</code> file: `Smile.gif`
  2. <code>**Edit**</code> topic and write text: `%ATTACHURL%/Smile.gif`
  3. <code>**Preview**</code>: text appears as ![Smile.gif](http://www.dementia.org/twiki//view/%WEB%/%TOPIC%/Smile.gif), an image.

<a name="FileAttachmentTable"></a>

## <a name="File Attachment Contents Table"></a> File Attachment Contents Table

Files attached to a topic are displayed in a directory table, displayed at the bottom of the page, or optionally, hidden and accessed when you click **Attach**.

> <table border="1" cellpadding="20" cellspacing="0" width="90%">
>   <tr>
>     <td>
>       <table border="1" cellpadding="1" cellspacing="0">
>         <tr>
>           <th align="center" bgcolor="#99CCCC"><strong><a href="FileAttachment">Attachment</a></strong></th>
>           <th align="center" bgcolor="#99CCCC"><strong>Action</strong></th>
>           <th align="center" bgcolor="#99CCCC"><strong>Size</strong></th>
>           <th align="center" bgcolor="#99CCCC"><strong>Date</strong></th>
>           <th align="center" bgcolor="#99CCCC"><strong>Who</strong></th>
>           <th align="center" bgcolor="#99CCCC"><strong>Comment</strong></th>
>         </tr>
>         <tr>
>           <td><img align="top" height="16" src="http://www.dementia.org/twiki//view/icn/txt.gif" width="16" /> <a href="http://www.dementia.org/twiki//viewfile/%WEB%/%TOPIC%?rev=&filename=Sample.txt">Sample.txt</a></td>
>           <td><a href="http://www.dementia.org/twiki//attach/%WEB%/%TOPIC%?filename=Sample.txt&revInfo=1">manage</a></td>
>           <td align="right"> 0.1 K </td>
>           <td> 22 Jul 2000 - 19:37 </td>
>           <td><a href="PeterThoeny">PeterThoeny</a></td>
>           <td> Just a sample </td>
>         </tr>
>         <tr>
>           <td><img align="top" hight="16" src="http://www.dementia.org/twiki//view/icn/bmp.gif" width="16" /> <a href="http://www.dementia.org/twiki//viewfile/%WEB%/%TOPIC%?rev=&filename=Smile.gif">Smile.gif</a></td>
>           <td><a href="http://www.dementia.org/twiki//attach/%WEB%/%TOPIC%?filename=Smile.gif&revInfo=1">manage</a></td>
>           <td align="right"> 0.1 K </td>
>           <td> 22 Jul 2000 - 19:38 </td>
>           <td><a href="PeterThoeny">PeterThoeny</a></td>
>           <td> Smiley face </td>
>         </tr>
>       </table>
>     </td>
>   </tr>
> </table>

## <a name="File Attachment Controls"></a> File Attachment Controls

Clicking on a <code>**Manage**</code> link takes you to a new page that looks like this:

> <form>
>   <table border="1" cellpadding="20" cellspacing="0">
>     <tr>
>       <td>
>         <table border="1" cellpadding="1" cellspacing="0">
>           <tr>
>             <th align="center" bgcolor="#99CCCC"><strong><a href="FileAttachment">Attachment</a></strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Action</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Size</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Date</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Who</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Comment</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong><a href="FileAttribute">Attribute</a></strong></th>
>           </tr>
>           <tr>
>             <td><img align="top" height="16" src="http://www.dementia.org/twiki//view/icn/txt.gif" width="16" /> <a href="http://www.dementia.org/twiki//viewfile/TWiki/%WEB%/%TOPIC%?rev=&filename=Sample.txt">Sample.txt</a></td>
>             <td><a href="http://www.dementia.org/twiki//attach/%WEB%/%TOPIC%?filename=Sample.txt&revInfo=1">manage</a></td>
>             <td align="right"> 0.1 K </td>
>             <td> 22 Jul 2000 - 19:37 </td>
>             <td><a href="PeterThoeny">PeterThoeny</a></td>
>             <td> Just a sample </td>
>             <td align="center">   </td>
>           </tr>
>           <tr>
>             <td><img align="top" height="16" src="http://www.dementia.org/twiki//view/icn/bmp.gif" width="16" /> <a href="http://www.dementia.org/twiki//viewfile/%WEB%/%TOPIC%?rev=&filename=Smile.gif">Smile.gif</a></td>
>             <td><a href="http://www.dementia.org/twiki//attach/%WEB%/%TOPIC%?filename=Smile.gif&revInfo=1">manage</a></td>
>             <td align="right"> 0.1 K </td>
>             <td> 22 Jul 2000 - 19:38 </td>
>             <td><a href="PeterThoeny">PeterThoeny</a></td>
>             <td> Smiley face </td>
>             <td align="center">   </td>
>           </tr>
>         </table>
>         <p>
>         </p>
>         <h2>Update attachment <code>Sample.txt</code></h2>
>         <p>
>         </p>
>         <table border="1" cellpadding="1" cellspacing="0">
>           <tr>
>             <th align="center" bgcolor="#99CCCC"><strong>Version</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Action</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Date</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Who</strong></th>
>             <th align="center" bgcolor="#99CCCC"><strong>Comment</strong></th>
>           </tr>
>           <tr>
>             <td> 1.1 </td>
>             <td><a href="http://www.dementia.org/twiki//viewfile/%WEB%/%TOPIC%?rev=1.1&filename=Sample.txt">view</a></td>
>             <td> 2001.08.30.09.28.56 </td>
>             <td><a href="PeterThoeny">PeterThoeny</a></td>
>             <td>   </td>
>           </tr>
>         </table>
>         <p>
>         </p>
>         <table width="100%">
>           <tr>
>             <td align="right"> Previous <br /> upload: </td>
>             <td><code>C:\DATA\Sample.txt</code> (<a href="PeterThoeny">PeterThoeny</a>) </td>
>           </tr>
>           <tr>
>             <td align="right"> Local file: </td>
>             <td><input name="filename" type="hidden" value="Sample.txt" /> <input name="filepath" size="50" type="file" value="C:\DATA\Sample.txt" /></td>
>           </tr>
>           <tr>
>             <td align="right"> Comment: </td>
>             <td><input maxlength="50" name="filecomment" size="50" type="text" value="Just a sample" /></td>
>           </tr>
>           <tr>
>             <td align="right"> Link: </td>
>             <td><input name="createlink" type="checkbox" /> Create a link to the attached file at the end of the topic. </td>
>           </tr>
>           <tr>
>             <td align="right"> Hide file: </td>
>             <td><input name="hidefile" type="checkbox" /> Hide attachment in normal topic view. </td>
>           </tr>
>         </table><em>Help text ...</em><p> Topic <b>FileAttachment</b> . { </p><input type="submit" value="   Upload file   " /> | <input name="changeproperties" type="submit" value="Change properties" /> | <a href="http://www.dementia.org/twiki//rename/%WEB%/%TOPIC%?attachment=Sample.txt">Move attachment</a> | <a href="FileAttachment">Cancel</a> } </td>
>     </tr>
>   </table>
> </form>

- The first table is a list of all attachments, including their attributes. An `h` means the attachment is hidden, it isn't listed when viewing a topic.

- The second table is all the versions of the attachment. Click on **View** to see that version. If it's the most recent version, you'll be taken to an URL that always displays the latest version, which is usually what you want.
  - **To change the comment** on an attachment, enter a new comment and then click **Change properties**. Note that the comment listed against the specific version will not change, however the comment displayed when viewing the topic does change.
  - **To hide/unhide** an attachment, enable the <code>**Hide file**</code> checkbox, then click <code>**Change properties**</code>.

## <a name="Known Issues"></a> Known Issues

- Unlike topics, attachments are not locked during editing. As a workaround, you can change the comment to indicate an attachment file is being worked on - the comment on the specific version isn't lost, it's there when you list all versions of the attachment.
