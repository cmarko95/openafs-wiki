<div>
  <ul>
    <li><a href="#Form Templates"> Form Templates</a><ul>
        <li><a href="#Overview"> Overview</a></li>
        <li><a href="#TWikiCategoryTables Are History"> TWikiCategoryTables Are History</a><ul>
            <li><a href="#Changes from the Category Table"> Changes from the Category Table System</a></li>
            <li><a href="#Migrating Existing Category Tabl"> Migrating Existing Category Table Data</a></li>
          </ul>
        </li>
        <li><a href="#Form Template Elements"> Form Template Elements</a><ul>
            <li><a href="#Defining a Form Template"> Defining a Form Template</a></li>
            <li><a href="#Defining a Form in One Topic"> Defining a Form in One Topic</a></li>
            <li><a href="#Defining a Form in Multiple Topi"> Defining a Form in Multiple Topics</a></li>
            <li><a href="#Various Implementation Notes"> Various Implementation Notes</a></li>
          </ul>
        </li>
        <li><a href="#Enabling Forms by Web"> Enabling Forms by Web</a></li>
        <li><a href="#Creating New Topics with Forms"> Creating New Topics with Forms</a></li>
        <li><a href="#Setting Up Multiple Form Options"> Setting Up Multiple Form Options</a></li>
        <li><a href="#Form Template Data Storage"> Form Template Data Storage</a></li>
      </ul>
    </li>
  </ul>
</div>

## <a name="Form Templates"></a> Form Templates

Topics allow for flexible free format data, sometimes you want to ensure strucutre to some of the topic information, this can be done with Forms e.g. saying what type of topic it is (e.g. Bug, Feature, FAQ entry etc) and then filling in fields using dropdowns, radio buttons etc.

### <a name="Overview"></a> Overview

If forms are enabled for a Web and a topic has a form you will see it as a table when viewing the page. When you edit you will see the various edit controls below the normal text area. There will be a button at the top of the form marked _Change_ which allows you to change to a different form, or remove the form. If you edit a topic without a form, there will be a button _Add Form_, that let's you associate a form with the topic; note that changes you have made to the topic are not lost when you select this option.

You can search for topics with specific form data using the %SEARCH% variable - see [[TWikiVariables|Main/TWikiDocumentation#TWikiVariables]].

### <a name="TWikiCategoryTables Are History"></a><a name="_TWikiCategoryTables Are History"></a> TWikiCategoryTables Are History

Form Templates more powerful, flexible replacement for the original TWikiCategoryTable.

#### <a name="Changes from the Category Table"></a><a name="Changes from the Category Table "></a> Changes from the Category Table System

Main changes from TWikiCategoryTable: The templates for category view/edit have been dropped, and the forma renders to HTML on viewing.

<table border="1" cellpadding="0" cellspacing="0">
  <tr>
    <th bgcolor="#99CCCC"><strong> Form Templates </strong></th>
    <th bgcolor="#99CCCC"><strong> Category Tables </strong></th>
  </tr>
  <tr>
    <td> defined by topics </td>
    <td> defined in a template file </td>
  </tr>
  <tr>
    <td> multiple forms per web </td>
    <td> one category per web </td>
  </tr>
  <tr>
    <td> data saved in Meta variables </td>
    <td> data saved as HTML </td>
  </tr>
  <tr>
    <td> [Change] form and [Add Form] contol buttons </td>
    <td> UseCategory radio button </td>
  </tr>
</table>

#### <a name="Migrating Existing Category Tabl"></a> Migrating Existing Category Table Data

The new Form Template system should work with old Category Table data with no special conversion. Old data should be transparently upgraded to the new Meta format when a page imported from the old TWiki is edited and saved in the new system for the first time.

On upgrading, the administrator must produce a form template topic for each web that uses the old Category Tables. `twikicatitems.tmpl` defines the categories and is used in the conversion. The form template must be set as the first item in the [[WebPreferences]] variable `=WEBFORM`. If it's not present, `view` works, but `edit` results in an _oops_ dialog result. If things aren't working correctly, there may be entries in `data/warning.txt`.

### <a name="Form Template Elements"></a> Form Template Elements

- **Form Template:** A set of fields defining a form. (_Class_ in OO speak; used to be called _category table definition_)
  - A web may contain more then zero or more form template.
- **Form:** A topic containing additional meta-data (besides the free form TEXTAREA) which categorizes the content. (_Object_ in OO speak; used to be called _category table_)
  - A topic has zero or one of the defined forms. So there are topics with a form or without.
- **Form Field:** A named item in a form. (Used to be called _category item name_)
- **Field Type:** The type of a field when editing a form. The type defines the HTML INPUT tag widgets when editing a topic:
  - **select:** Drop down box or selector
  - **checkbox:** One or more check boxes
  - **checkbox+buttons:** One or more check boxes, plus [Set] and []\[Clear] buttons to set/clear all checkboxes
  - **radio:** One or more radio buttons
  - **text:** A one-line text field
  - **textarea:** A general text area - size is _rows_x_cols_ 40x10
- **Field Value:** Value of a form field. Can be one or more values from a fixed set (select, checkbox, radio type) or free form (text type). (Used to be called _category item value_)

#### <a name="Defining a Form Template"></a> Defining a Form Template

A Form Template is simply a page containing your form, defined in a table where each row is one form field.

1. Create a new topic with your Form name: MyForm, ExpenseReport, InfoCategory, RecordReview, whatever you need.
2. Create a TWiki table, with each column representing one element of an entry field: Name, Type, Size, Values, and Tooltip msessage (see sample below).
3. For each field, fill in a new line; for the type of field, select from the list.
4. Save the topic.

> <span><font>**Example:** Form Template </font></span>
>
>     | *Name:* | *Type:* | *Size:* | *Values:* | *Tooltip message:* |
>     | TopClass | select | 1 | Select one..., Private, Public | must fill |
>     | Target   | checkbox+buttons | 3 | 1, No.2, No.3 | Select OS |
>     | Version | text | 16 | | OS version |

#### <a name="Defining a Form in One Topic"></a> Defining a Form in One Topic

Example: WebFormTemplate of the TWiki.Know web:

<table border="1" cellpadding="0" cellspacing="0">
  <tr>
    <th bgcolor="#99CCCC"><strong> Name: </strong></th>
    <th bgcolor="#99CCCC"><strong> Type: </strong></th>
    <th bgcolor="#99CCCC"><strong> Size: </strong></th>
    <th bgcolor="#99CCCC"><strong> Values: </strong></th>
    <th bgcolor="#99CCCC"><strong> Tooltip message: </strong></th>
  </tr>
  <tr>
    <td>[[Know/TopicClassification]]</td>
    <td> select </td>
    <td> 1 </td>
    <td>[[Know/NoDisclosure]], [[Know/PublicSupported]], [[Know/PublicFAQ]]</td>
    <td> blah blah... </td>
  </tr>
  <tr>
    <td>[[Know/OperatingSystem]]</td>
    <td> checkbox </td>
    <td> 3 </td>
    <td>[[Know/OsHPUX]], [[Know/OsLinux]], [[Know/OsSolaris]], [[Know/OsWin]]</td>
    <td> blah blah... </td>
  </tr>
  <tr>
    <td>[[Know/OsVersion]]</td>
    <td> text </td>
    <td> 16 </td>
    <td>   </td>
    <td> blah blah... </td>
  </tr>
</table>

#### <a name="Defining a Form in Multiple Topi"></a> Defining a Form in Multiple Topics

The form template can also be defined in an alternative way by using more then one topic:

- A **form template topic** defines the form
- Values of fields that have more then one value, e.g. of type radio, select and checkbox can be defined by **field value template topics**

> <span><font>**Code from:** </font></span>
>
> - WebFormTemplate of the TWiki.Know web: <table border="1" cellpadding="0" cellspacing="0">
>   <tr>
>     <th bgcolor="#99CCCC"><strong> Name: </strong></th>
>     <th bgcolor="#99CCCC"><strong> Type: </strong></th>
>     <th bgcolor="#99CCCC"><strong> Size: </strong></th>
>     <th bgcolor="#99CCCC"><strong> Values: </strong></th>
>     <th bgcolor="#99CCCC"><strong> Tooltip message: </strong></th>
>   </tr>
>   <tr>
>     <td>[[Know/TopicClassification]]</td>
>     <td> select </td>
>     <td> 1 </td>
>     <td>   </td>
>     <td> blah blah... </td>
>   </tr>
>   <tr>
>     <td>[[Know/OperatingSystem]]</td>
>     <td> checkbox </td>
>     <td> 3 </td>
>     <td>   </td>
>     <td> blah blah... </td>
>   </tr>
>   <tr>
>     <td>[[Know/OsVersion]]</td>
>     <td> text </td>
>     <td> 16 </td>
>     <td>   </td>
>     <td> blah blah... </td>
>   </tr>
> </table>
>
> - TopicClassification topic: <table border="1" cellpadding="0" cellspacing="0">
>   <tr>
>     <th bgcolor="#99CCCC"><strong> Name: </strong></th>
>     <th bgcolor="#99CCCC"><strong> Type: </strong></th>
>     <th bgcolor="#99CCCC"><strong> Tooltip message: </strong></th>
>   </tr>
>   <tr>
>     <td>[[Know/NoDisclosure]]</td>
>     <td> option </td>
>     <td> blah blah... </td>
>   </tr>
>   <tr>
>     <td>[[Know/PublicSupported]]</td>
>     <td> option </td>
>     <td> blah blah... </td>
>   </tr>
>   <tr>
>     <td>[[Know/PublicFAQ]]</td>
>     <td> option </td>
>     <td> blah blah... </td>
>   </tr>
> </table>

#### <a name="Various Implementation Notes"></a> Various Implementation Notes

- This format allows you to define field items with / without [[WikiNames]], depending on your needs.
- The topic can be protected in the usual manner so that not everybody can change the form template - see [[TWikiAccessControl]]
- <code>[[...|/WebHome]]</code> can be used for force a link, at present <code>[[...|/WebHome]]</code> format is not supported
- The "Tooltip message:" column is used as a tool tip for the field name (only if field name is a [[WikiName]]) - you only see the tooltip on edit
- The first item in the list is the default item. Alternative initial values can be given in a topic template such as <code>**WebTopicEditTemplate**</code> or using fieldFLD=value or for checkboxes fieldFLDcheckbox=1 in URL
- The topic definition is not read when a topic is viewed

### <a name="Enabling Forms by Web"></a> Enabling Forms by Web

Forms are enabled on a per web basis. The <code>**WEBFORMS**</code> variable in [[WebPreferences]] is optional and defines a list of possible form templates e.g.

- Set WEBFORMS = BugForm, FeatureForm, BookLoanForm

With <code>**WEBFORMS**</code> enabled, an extra button is added to the edit view. If the topic doesn't have a form an [Add Form] button appears at the end of the topic. If a form is present, a [Change] button appears in the top row of the form. The buttons lead to a screen that enables _no form_ to be selected or one of those specified by `WEBFORMS`.

A default form template (i.e. new topics get this default form) can be provided by creating the <code>**WebTopicEditTemplate**</code> topic in a Web and adding a form to it. Initial form values can be set here.

Addtionaly a new topic can be given a form using the `formtemplate` parameter in the URL. Initial values can then be provided in the URLs or as form values. Names being:

- Not checkboxs - nameFLD e.g. ?BugPriorityFLD=1
- Checkbox - nameFLDvalue=1 e.g. ?ColourFLDRed=1. Note that all boxes with a tick must be specified.

### <a name="Creating New Topics with Forms"></a> Creating New Topics with Forms

When you create a new topic in a web that has the WEBFORMS Preferences variable set, an [Add Form] button appears at the bottom of the page. If the [[WebTopicEditTemplate]] topic has a form added, the form will appear with values set; press [Change] to remove the template or to switch to a different one.

A form embedded in a topic also appears in a new topic. This is done by specifying the `formtemplate` parameter in the URL.

### <a name="Setting Up Multiple Form Options"></a> Setting Up Multiple Form Options

- The optional <code>**WEBFORMS**</code> variable defines alternative Form Templates that can be selected after pressing [Change] on the Edit page
- A template topic can use any form template
- New topics with a form get instantiated by simple HTML forms asking for a topic name. If there is a SubmitExpenseReport topic were you can create new expense reports, a SubmitVacationRequest topic and so on. These can specify the required template topic and hence form. **_HUH?_**

### <a name="Form Template Data Storage"></a> Form Template Data Storage

The Form Template topic name, fields and values are stored in the topic [[Meta Data|Main/TWikiDocumentation#TWikiMetaData]]. The order of field/value pairs in the Meta Data is the same as in the Template. The Form name is required for [Edit] and [Save]. -- [[JohnTalintyre]] - 16 Aug 2001 <br />
