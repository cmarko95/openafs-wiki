# <a name="Templates for _CommentPlugin"></a><a name=" Templates for _CommentPlugin"></a> Templates for [[CommentPlugin]]

See [[CommentPlugin: Customisation|TWiki/CommentPlugin#Customisation]] for help.

While this topic can be viewed as a TWiki topic, it is used by the [[CommentPlugin]] as a template file - see [[TWikiTemplates]]. The important content in here is in the verbatim blocks. The rest of the topic is just comments.

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See [[CommentPluginExamples]] to view rendered templates

<div style="background-color: #ffc">WARNING: THIS FILE WILL BE OVERWRITTEN WHEN YOU UPGRADE THE COMMENT PLUGIN</div>

Put your local templates into [[UserCommentsTemplate]] (create if it does not exist yet). **Local templates defined in that topic will override templates defined below.**

<div><span>Table of Contents</span><ul>
    <li><a href="#Template definitions"> Template definitions</a><ul>
        <li><a href="#Templates used in rest of file"> Templates used in rest of file</a></li>
        <li><a href="#User templates"> User templates</a><ul>
            <li><a href="#top"> top</a></li>
            <li><a href="#bottom"> bottom</a></li>
            <li><a href="#above"> above</a></li>
            <li><a href="#bulletabove"> bulletabove</a></li>
            <li><a href="#threadmode"> threadmode</a></li>
            <li><a href="#belowthreadmode"> belowthreadmode</a></li>
            <li><a href="#below"> below</a></li>
            <li><a href="#tableprepend"> tableprepend</a></li>
            <li><a href="#tableappend"> tableappend</a></li>
            <li><a href="#after: Add before the comment bo"> after: Add before the comment box, after the last comment</a></li>
            <li><a href="#action"> action</a></li>
            <li><a href="#table"> table</a></li>
            <li><a href="#toctalk"> toctalk</a></li>
            <li><a href="#bookmark"> bookmark</a></li>
            <li><a href="#return"> return</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#Include _UserComments"> Include UserComments</a></li>
  </ul>
</div>

## <a name="Template definitions"></a> Template definitions

### <a name="Templates used in rest of file"></a> Templates used in rest of file

Generic prompt box used by other templates

    %TMPL:DEF{promptbox}%<div class="commentPlugin commentPluginPromptBox"><table border="0" cellpadding="0" cellspacing="0"><tr valign="middle"><td><textarea %DISABLED% rows="%rows|3%" cols="%cols|70%" name="comment" class="twikiInputField" wrap="soft" onfocus="if(this.value=='%MESSAGE%')this.value=''" onblur="if(this.value=='')this.value='%MESSAGE%'">%MESSAGE%</textarea></td><td>&nbsp;<input %DISABLED% type="submit" value="%button|Add comment%" class="twikiButton" /></td></tr></table></div><!--/commentPlugin-->%TMPL:END%

Short comment, signed and dated

    %TMPL:DEF{outputoneliner}%   * %URLPARAM{"comment"}% -- %WIKIUSERNAME% - %GMTIME{"$day $month $year"}%%TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[Default|Main/CommentPluginExamples#Default]]

### <a name="User templates"></a> User templates

#### <a name="top"></a> top

Comments, signed and dated, added at top of file

    %TMPL:DEF{PROMPT:top}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:top}%%TMPL:P{outputoneliner}%%POS:TOP%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[top|Main/CommentPluginExamples#top]]

#### <a name="bottom"></a> bottom

Comments, signed and dated, added at end of file

    %TMPL:DEF{PROMPT:bottom}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:bottom}%%POS:BOTTOM%%TMPL:P{outputoneliner}%%TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[bottom|Main/CommentPluginExamples#bottom]]

#### <a name="above"></a> above

Comments, signed and dated, added immediately before anchor

    %TMPL:DEF{PROMPT:above}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:above}%%POS:BEFORE%%TMPL:P{OUTPUT:threadmode}%%TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[above|Main/CommentPluginExamples#above]]

#### <a name="bulletabove"></a> bulletabove

Bullet item added immediately before anchor. The input field width is passed with variable `inputsize`, for example:

> %COMMENT{type="bulletabove" inputsize="20"}%

    %TMPL:DEF{PROMPT:bulletabove}%<input class="twikiInputField" name="bullet_above_item" id="bullet_above_item" type="text" size="%inputsize|40" value="%URLPARAM{"bullet_above_item"}%" />&nbsp;<input %DISABLED% type="submit" value="%button|Add item%" class="twikiButton" />%TMPL:END%

    %TMPL:DEF{OUTPUT:bulletabove}%   * %URLPARAM{"bullet_above_item"}%%POS:BEFORE%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[bulletabove|Main/CommentPluginExamples#bulletabove]]

#### <a name="threadmode"></a> threadmode

Wiki thread mode comment, signed and dated

    %TMPL:DEF{PROMPT:threadmode}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:threadmode}%%POS:BEFORE%

    %URLPARAM{"comment"}%

    -- %WIKIUSERNAME% - %DATE%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[threadmode|Main/CommentPluginExamples#threadmode]]

#### <a name="belowthreadmode"></a> belowthreadmode

Comments, signed and dated, added recurse after comment box.

    %TMPL:DEF{PROMPT:belowthreadmode}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:belowthreadmode}%%POS:AFTER%
    ---++++ %WIKIUSERNAME% - %SERVERTIME%

    %URLPARAM{"comment"}%

    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[belowthreadmode|Main/CommentPluginExamples#belowthreadmode]]

#### <a name="below"></a> below

Comments, signed and dated, added immediately below anchor

    %TMPL:DEF{PROMPT:below}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:below}%%POS:AFTER%%TMPL:P{outputoneliner}%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[below|Main/CommentPluginExamples#below]]

#### <a name="tableprepend"></a> tableprepend

Comments, signed and dated, added at top of table below the anchor/location/COMMENT

    %TMPL:DEF{PROMPT:tableprepend}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:tableprepend}%%POS:AFTER%| %URLPARAM{"comment" newline="<br />"}% | %WIKIUSERNAME% | %SERVERTIME% |
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[tableprepend|Main/CommentPluginExamples#tableprepend]]

#### <a name="tableappend"></a> tableappend

Comments, signed and dated, added at end of table above the anchor/location/COMMENT

    %TMPL:DEF{PROMPT:tableappend}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:tableappend}%%POS:BEFORE%| %URLPARAM{"comment" newline="<br />"}% | %WIKIUSERNAME% | %SERVERTIME% |
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[tableappend|Main/CommentPluginExamples#tableappend]]

#### <a name="after: Add before the comment bo"></a> after: Add before the comment box, after the last comment

    %TMPL:DEF{PROMPT:after}%%TMPL:P{promptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:after}%%NOP%%TMPL:P{outputoneliner}%
    %POS:BEFORE%%TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[after|Main/CommentPluginExamples#after]]

#### <a name="action"></a> action

Action added to action table directly above comment box (requires TWiki:Plugins/ActionTrackerPlugin)

    %TMPL:DEF{PROMPT:action}%

    %TABLE{databg="#ffffff" tableborder="0" cellborder="0"}%
    |        <label for="action_who">Action for</label>| <input class="twikiInputField" name="action_who" id="action_who" type="text" size="50" value="%URLPARAM{"who"}%" /> |
    | <label for="action_due">Due date</label>| <input class="twikiInputField" name="action_due" id="action_due" type="text" size="30" value="%URLPARAM{"due"}%" /> |
    |    <label for="action_comment">Comment</label>| <textarea %DISABLED% rows="%rows|3%" cols="%cols|50%" name="action_comment" id="action_comment" class="twikiInputField" wrap="soft" onfocus="if(this.value=='%MESSAGE%')this.value=''" onblur="if(this.value=='')this.value='%MESSAGE%'">%MESSAGE%</textarea> |
    || <input %DISABLED% type="submit" class="twikiButton" value="Add action" /> |
    %TMPL:END%

    %TMPL:DEF{OUTPUT:action}%%POS:BEFORE%%AC%NOP%TION{who="%URLPARAM{"action_who"}%" due="%URLPARAM{"action_due"}%"}% %URLPARAM{"action_comment" newline="<br />"}%<br />- Created by %WIKIUSERNAME%, %SERVERTIME%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[action|Main/CommentPluginExamples#action]]

#### <a name="table"></a> table

Tablerows adding on end - TWiki:Main/FranzJosefSilli

    %TMPL:DEF{PROMPT:table}%
    %TABLE{databg="#ffffff" tableborder="0" cellborder="0"}%
    |        <label for="comment_date">Date</label>| <input class="twikiInputField" %DISABLED% type="text" size="40" name="comment_date" id="comment_date" /> |
    |        <label for="comment_city">City</label>| <input class="twikiInputField" %DISABLED% type="text" size="40" name="comment_city" id="comment_city" value="" /> |
    || <input %DISABLED% type="submit" class="twikiButton" value="%button|Add entry%" /> |
    %TMPL:END%

    %TMPL:DEF{OUTPUT:table}%%POS:BEFORE%| %URLPARAM{"comment_date"}% | %WIKIUSERNAME% | %URLPARAM{"comment_city" }% |
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[table|Main/CommentPluginExamples#table]]

#### <a name="toctalk"></a> toctalk

Talk using TOC adding on end - TWiki:Main/FranzJosefSilli

    %TMPL:DEF{PROMPT:toctalk}%
    %TABLE{databg="#ffffff" tableborder="0" cellborder="0"}%
    |        <label for="comment_summary">Summary</label>| <input class="twikiInputField" %DISABLED% type="text" size="40" name="comment_summary" id="comment_summary" /> |
    |        <label for="toctalk_comment_text">Message</label>| <textarea %DISABLED% rows="%rows|3%" cols="%cols|50%" name="toctalk_comment_text" id="toctalk_comment_text" class="twikiInputField" wrap="soft" onfocus="if(this.value=='%MESSAGE%')this.value=''" onblur="if(this.value=='')this.value='%MESSAGE%'">%MESSAGE%</textarea> |
    || <input %DISABLED% type="submit" value="%button|Add%" class="twikiButton" /> |
    %TMPL:END%

    %TMPL:DEF{OUTPUT:toctalk}%
    %POS:BEFORE%---++++ %SERVERTIME% %WIKIUSERNAME%: %URLPARAM{"comment_summary"}%
    %POS:BEFORE%%URLPARAM{"toctalk_comment_text" }%
    %POS:BEFORE%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[toctalk|Main/CommentPluginExamples#toctalk]]

#### <a name="bookmark"></a> bookmark

Talk using TOC adding on end - TWiki:Main/FranzJosefSilli

    %TMPL:DEF{PROMPT:bookmark}%
    %TABLE{databg="#ffffff" tableborder="0" cellborder="0"}%
    |        <label for="comment_url">Url</label>| <input class="twikiInputField" %DISABLED% type="text" size="40" name="comment_url" id="comment_url" value="http://" /> |
    | <label for="comment_link">Link label</label>| <input class="twikiInputField" %DISABLED% type="text" size="40" name="comment_link" id="comment_link" /> |
    |    <label for="bookmark_comment_text">Comment</label>| <input class="twikiInputField" %DISABLED% type="text" size="40" name="bookmark_comment_text" id="bookmark_comment_text" value="%MESSAGE%" /> |
    || <input %DISABLED% type="submit" value="%button|Add bookmark%" class="twikiButton" /> |
    %TMPL:END%

    %TMPL:DEF{OUTPUT:bookmark}%%POS:BEFORE%   * [[%URLPARAM{"comment_url" encode="entity"}%][%URLPARAM{"comment_link" encode="entity"}%]] %IF{" '%URLPARAM{"bookmark_comment_text" encode="entity"}%' = '' " then="" else="- "}%%URLPARAM{"bookmark_comment_text" encode="entity"}%
    %TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[bookmark|Main/CommentPluginExamples#bookmark]]

#### <a name="return"></a> return

Post to a different topic and return to here. The comment `target` is set in the `PROMPT`. In the form below the `redirectto` is set to the current (including) topic. %RED% Available with TWiki 4.1. %ENDCOLOR%

    %TMPL:DEF{returnpromptbox}%
    <input type="hidden" name="redirectto" value="%BASEWEB%.%BASETOPIC%" />
    %TMPL:P{promptbox}%
    %TMPL:END%

    %TMPL:DEF{PROMPT:return}%%TMPL:P{returnpromptbox}%%TMPL:END%

    %TMPL:DEF{OUTPUT:return}%%POS:BEFORE%%TMPL:P{OUTPUT:threadmode}%%TMPL:END%

<img src="http://www.dementia.org/twiki//view/Main/WebHome/hand.gif" width="16" height="16" alt="hand" /> See rendered template [[return|Main/CommentPluginExamples#return]]

## <a name="Include _UserComments"></a> Include UserComments

Including [[UserComments]]:

%TMPL:INCLUDE\{"UserComments"\}%
