# <a name="Package &lt;code&gt;TWiki::_I18N="></a> Package =TWiki::I18N

Support for strings translation and language detection.

<div>
  <ul>
    <li><a href="#Package =TWiki::_I18N="> Package TWiki::I18N</a><ul>
        <li><a href="#ClassMethod *available_languages"> ClassMethod available_languages <tt></tt></a></li>
        <li><a href="#ClassMethod <strong>get</strong> ($session)"> ClassMethod get <tt>($session)</tt></a></li>
        <li><a href="#ObjectMethod <strong>maketext</strong> ($text)"> ObjectMethod maketext <tt>($text) -&gt; $translation</tt></a></li>
        <li><a href="#ObjectMethod <strong>language</strong> () -> $l"> ObjectMethod language <tt>() -&gt; $language_tag</tt></a></li>
        <li><a href="#ObjectMethod *enabled_languages*"> ObjectMethod enabled_languages <tt>() -&gt; %languages</tt></a></li>
        <li><a href="#ObjectMethod *from_SiteCharSet*"> ObjectMethod fromSiteCharSet <tt>($text) -&gt; $encoded</tt></a></li>
        <li><a href="#ObjectMethod <strong>to_SiteCharSet</strong> ($"> ObjectMethod toSiteCharSet <tt>($encoded) -&gt; $text</tt></a></li>
      </ul>
    </li>
  </ul>
</div>

## <a name="ClassMethod &lt;strong&gt;available_languages"></a> [[ClassMethod]] \*available\_languages ``

Lists languages tags for languages available at TWiki installation. Returns a list containing the tags of the available languages.

**_Note_**: the languages available to users are determined in the `configure` interface.

## <a name="ClassMethod &lt;strong&gt;get&lt;/strong&gt; ($session)"></a> [[ClassMethod]] **get** `($session)`

Constructor. Gets the language object corresponding to the current user's language.

## <a name="ObjectMethod &lt;strong&gt;maketext&lt;/strong&gt; ($text)"></a><a name="ObjectMethod &lt;strong&gt;maketext&lt;/strong&gt; ($text) "></a> [[ObjectMethod]] **maketext** `($text) -> $translation`

Translates the given string (assumed to be written in English) into the current language, as detected in the constructor, and converts it into the site charset.

Wraps around Locale::Maketext's maketext method, adding charset conversion and checking

Return value: translated string, or the argument itself if no translation is found for thet argument.

## <a name="ObjectMethod &lt;strong&gt;language&lt;/strong&gt; () - $la"></a> [[ObjectMethod]] **language** `() -> $language_tag`

Indicates the language tag of the current user's language, as detected from the information sent by the browser. Returns the empty string if the language could not be determined.

## <a name="ObjectMethod &lt;strong&gt;enabled_languages*"></a> [[ObjectMethod]] \*enabled\_languages `() -> %languages`

Returns an array with language tags as keys and language (native) names as values, for all the languages enabled in this [[TWikiSite]]. Useful for listing available languages to the user.

## <a name="ObjectMethod &lt;strong&gt;from_SiteCharSet*"></a><a name="ObjectMethod *from_SiteCharSet&lt;/strong&gt; "></a> [[ObjectMethod]] **fromSiteCharSet** `($text) -> $encoded`

This method receives `$text`, assumed to be encoded in \{Site\}\{CharSet\}, and converts it to a internal representation.

Currently this representation will be a UTF-8 string, but this may change in the future. This way, you can't assume any property on the returned value, and should only use the returned value of this function as input to toSiteCharSet. If you change the returnd value, either by removing, updating or appending characters, be sure to touch only ASCII characters (i.e., characters that have ord() less than 128).

## <a name="ObjectMethod &lt;strong&gt;to_SiteCharSet&lt;/strong&gt; ($"></a> [[ObjectMethod]] **toSiteCharSet** `($encoded) -> $text`

This method receives a string, assumed to be encoded in TWiki's internal string representation (as generated by the fromSiteCharSet method, and converts it into \{Site\}\{CharSet\}.

When converting into \{Site\}\{CharSet\}, characters that are not present at that charset are represented as HTML numerical character entities (NCR's), in the format `&#NNNN;`, where NNNN is the character's Unicode codepoint.

See also: the `fromSiteCharSet` method.
