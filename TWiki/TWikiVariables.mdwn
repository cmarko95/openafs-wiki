# <a name="TWiki Variables"></a> TWiki Variables

_Special text strings expand on the fly to display user data or system info_

TWikiVariables are text strings - `%VARIABLE%` or `%VARIABLE{ parameter="value" }%` - that expand into content whenever a topic is rendered for viewing. There are two types of variables:

1. Preferences variables: Can be defined and changed by the user
2. Predefined variables: Defined by the TWiki system or by Plugins (for example, the [[SpreadSheetPlugin]] introduces a `%CALC{}%` variable)

<div>
  <ul>
    <li><a href="#TWiki Variables"> TWiki Variables</a><ul>
        <li><a href="#Using Variables"> Using Variables</a></li>
        <li><a href="#Variable Names"> Variable Names</a></li>
        <li><a href="#Preferences Variables"> Preferences Variables</a><ul>
            <li><a href="#Setting Preferences Variables"> Setting Preferences Variables</a></li>
            <li><a href="#Access Control Variables"> Access Control Variables</a></li>
            <li><a href="#Local values for variables"> Local values for variables</a></li>
            <li><a href="#Frequently Used Preferences Vari"> Frequently Used Preferences Variables</a></li>
          </ul>
        </li>
        <li><a href="#Predefined Variables"> Predefined Variables</a></li>
      </ul>
    </li>
    <li><a href="#TWiki Installation Error">TWiki Installation Error</a></li>
  </ul>
</div>

## <a name="Using Variables"></a> Using Variables

To use a variable type its name. For example,

- type `%T%` to get %T% (a preferences variable)
- type `%TOPIC%` to get `%TOPIC%` (a predefined variable)
- type `%CALC{ "$UPPER(Text)" }%` to get `TEXT` (a variable defined by Plugin)

**_Note:_**

- To leave a variable unexpanded, precede it with an exclamation point, e.g. type `!%TOPIC%` to get `%TOPIC%`
- Variables are expanded relative to the topic they are _used_ in, not the topic they are _defined_ in
- Type `%ALLVARIABLES%` to get a full listing of all variables defined for a particular topic

## <a name="Variable Names"></a> Variable Names

Variable names must start with a letter. The following characters can be letters, numbers and the underscore '\_'. You can use both upper-case and lower-case letters and you can mix the characteres. E.g. `%MYVAR%`, `%MyVar%`, `%My2ndVar%`, and `%My_Var%` are all valid variable names. Variables are case sensitive. `%MyVAR%` and `%MYVAR%` are not the same variable.

By convention all settings, predefined variables and variables used by plugins are always UPPER-CASE.

<a name="SettingPrefs"></a> <a name="PreferencesVariables"></a>

## <a name="Preferences Variables"></a> Preferences Variables

Unlike predefined variables, preferences variables can be defined by the user in various places.

### <a name="Setting Preferences Variables"></a> Setting Preferences Variables

You can set variables in all the following places:

1. local site level in [[%SYSTEMWEB%.TWikiPreferences|SYSTEMWEB/TWikiPreferences]]
2. plugin topics (see [[TWikiPlugins]])
3. local site level in [[Main.TWikiPreferences|Main/TWikiPreferences]]
4. user level in individual user topics in %USERSWEB% web
5. web level in [[WebPreferences]] of each web
6. topic level in topics in webs
7. session variables (if sessions are enabled)

Settings at higher-numbered levels override settings of the same variable at lower numbered levels, unless the variable was included in the setting of FINALPREFERENCES at a lower-numbered level, in which case it is locked at the value it has at that level.

If you are setting a variable and using it in the same topic, note that TWiki reads all the variable settings from the saved version of the topic before it displays anything. This means you can use a variable anywhere in the topic, even if you set it somewhere inconspicuous near the end. **But beware:** it also means that if you change the setting of a variable you are using in the same topic, <code>**Preview**</code> will show the wrong thing, and you must <code>**Save**</code> the topic to see it correctly.

The syntax for setting Variables is the same anywhere in TWiki (on its own TWiki bullet line, including nested bullets): <br />`[multiple of 3 spaces] * [space] Set [space] VARIABLENAME [space] = [space] value`

> **Examples:**
>
> - <code>**Set VARIABLENAME = value**</code>
>   - <code>**Set VARIABLENAME = value**</code>

Spaces between the = sign and the value will be ignored. You can split a value over several lines by indenting following lines with spaces - as long as you don't try to use \* as the first character on the following line.

> **Example:**
>
>        * Set VARIABLENAME = value starts here
>          and continues here

Whatever you include in your Variable will be expanded on display, exactly as if it had been entered directly.

> **Example: Create a custom logo variable**
>
> <br />
>
> - To place a logo anywhere in a web by typing <code>**%MYLOGO%**</code>, define the Variable on the web's [[WebPreferences]] topic, and upload a logo file, ex: `mylogo.gif`. You can upload by [[attaching the file|Main/FileAttachment]] to [[WebPreferences]], or, to avoid clutter, to any other topic in the same web, e.g. `LogoTopic`. Sample variable setting in [[WebPreferences]]:
>   - <code>**Set MYLOGO = %PUBURL%/%WEB%/LogoTopic/mylogo.gif**</code>

You can also set preferences variables on a topic by clicking the link `Edit topic preference settings` under `More topic actions`. Preferences set in this manner are not visible in the topic text, but take effect nevertheless.

### <a name="Access Control Variables"></a> Access Control Variables

These are special types of preferences variables to control access to content. [[TWikiAccessControl]] explains these security settings in detail.

### <a name="Local values for variables"></a> Local values for variables

Certain topics (a users home topic, web site and default preferences topics) have a problem; variables defined in those topics can have two meanings. For example, consider a user topic. A user may want to use a double-height edit box when they are editing their home topic - but **only** when editing their home topic. The rest of the time, they want to have a normal edit box. This separation is achieved using `Local` in place of `Set` in the variable definition. For example, if the user sets the following in their home topic:

       * Set EDITBOXHEIGHT = 10
       * Local EDITBOXHEIGHT = 20

Then when they are editing any other topic, they will get a 10 high edit box. However when they are editing their home topic, they will get a 20 high edit box. `Local` can be used wherever a preference needs to take a different value depending on where the current operation is being performed.

Use this powerful feature with great care! `%ALLVARIABLES%` can be used to get a listing of the values of all variables in their evaluation order, so you can see variable scope if you get confused.

### <a name="Frequently Used Preferences Vari"></a> Frequently Used Preferences Variables

The following preferences variables are frequently used. They are defined in [[TWikiPreferences#Miscellaneous_Settings]]:

- `%BR%` - line break
- `%BULLET%` - bullet sign
- `%BB%` - line break and bullet combined
- `%BB2%` - indented line break and bullet
- `%RED% text %ENDCOLOR%` - colored text (also `%YELLOW%`, `%ORANGE%`, `%PINK%`, `%PURPLE%`, `%TEAL%`, `%NAVY%`, `%BLUE%`, `%AQUA%`, `%LIME%`, `%GREEN%`, `%OLIVE%`, `%MAROON%`, `%BROWN%`, `%BLACK%`, `%GRAY%`, `%SILVER%`, `%WHITE%`)
- `%H%` - %H% Help icon
- `%I%` - %I% Idea icon
- `%M%` - %M% Moved to icon
- `%N%` - %N% New icon
- `%P%` - %P% Refactor icon
- `%Q%` - %Q% Question icon
- `%S%` - %S% Pick icon
- `%T%` - %T% Tip icon
- `%U%` - %U% Updated icon
- `%X%` - %X% Alert icon
- `%Y%` - %Y% Done icon

There are additional useful preferences variables defined in [[TWikiPreferences]], in [[Main.TWikiPreferences|Main/TWikiPreferences]], and in [[WebPreferences]] of every web.

<a name="PreDef"></a>

## <a name="Predefined Variables"></a> Predefined Variables

Most predefined variables return values that were either set in the configuration when TWiki was installed, or taken from server info (such as current username, or date and time). Some, like `%SEARCH%`, are powerful and general tools.

- %X% Predefined variables can be overridden by [[preferences variables|Main/WebHome#PreferencesVariables]] (except TOPIC and WEB)
- %X% Plugins may extend the set of predefined variables (see individual Plugins topics for details)
- %T% **Take the time to thoroughly read through ALL preference variables.** If you actively configure your site, review variables periodically. They cover a wide range of functions, and it can be easy to miss the one perfect variable for something you have in mind. For example, see `%INCLUDINGTOPIC%`, `%INCLUDE%`, and the mighty `%SEARCH%`.

This version of TWiki - TWiki-4.1.2, Sat, 03 Mar 2007, build 13046 - predefines the following variables:

# <a name="TWiki Installation Error"></a> TWiki Installation Error

Incorrect format of searchformat template (missing sections? There should be 4 %SPLIT% tags)

**_Related Topics:_** [[UserDocumentationCategory]]
