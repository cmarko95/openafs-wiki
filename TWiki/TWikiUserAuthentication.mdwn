<div>
  <ul>
    <li><a href="#TWiki User Authentication"> TWiki User Authentication</a><ul>
        <li><a href="#Authentication Options"> Authentication Options</a></li>
        <li><a href="#Tracking by IP Address"> Tracking by IP Address</a></li>
        <li><a href="#TWiki Username vs. Login Usernam"> TWiki Username vs. Login Username</a></li>
      </ul>
    </li>
  </ul>
</div>

## <a name="TWiki User Authentication"></a> TWiki User Authentication

TWiki does not authenticate users internally, it depends on the <code>**REMOTE\_USER**</code> environment variable. This variable is set when you enable basic authentication or authentication via SSL (https protocol).

TWiki uses visitor identification to keep track of who made changes to topics at what time and to manage a wide range of personal site settings. This gives a complete audit trail of changes and activity.

### <a name="Authentication Options"></a> Authentication Options

No special installation steps need to be performed if the server is already authenticated. If not, you have three remaining options to controlling user access:

1. **Forget about authentication.** All changes are registered to [[TWikiGuest]] user, so you can't tell who made changes. Your site is completely open and public.
2. **Use Basic Authentication** for the <code>**edit**</code> and <code>**attach**</code> scripts. This uses .htaccess and generates the familiar grey log-in window. [[TWiki Installation Notes|Main/TWikiDocumentation#TWiki_Installation_Notes]] has more.
3. **Use SSL** to authenticate and secure the whole server.

### <a name="Tracking by IP Address"></a> Tracking by IP Address

The <code>**REMOTE\_USER**</code> environment variable is only set for the scripts that are under authentication. If, for example, the <code>**edit**</code>, <code>**save**</code> and <code>**preview**</code> scripts are authenticated, but not <code>**view**</code>, you would get your [[WikiName]] in <code>**preview**</code> for the <code>**%WIKIUSERNAME%**</code> variable, but <code>**view**</code> will show <code>**TWikiGuest**</code> instead of your WikiName.

There is a way to tell TWiki to remember the user for the scripts that are not authenticated, ex: in case the <code>**REMOTE\_USER**</code> environment variable is not set. TWiki can be configured to remember the IP address/username pair whenever an authentication happens (edit topic, attach file). Once remembered, the non-authenticated scripts like <code>**view**</code> will show the correct username instead of <code>**TWikiGuest**</code>. You can enable this by setting the <code>**$doRememberRemoteUser**</code> flag in <code>**TWiki.cfg**</code>. TWiki persistently stores the IP address / username pairs in file <code>**$remoteUserFilename**</code>, which is <code>**"$dataDir/remoteusers.txt"**</code> by default. Please note that this can fail if the IP address changes due to dynamically assigned IP addresses or proxy servers.

**Authentication Test:** You are Main.admin (%WIKIUSERNAME%)

### <a name="TWiki Username vs. Login Usernam"></a> TWiki Username vs. Login Username

This section applies only if your %WIKITOOLNAME% is installed on a server that is both **authenticated** and on an **intranet**.

%WIKITOOLNAME% internally manages two usernames: Login username and TWiki username.

- **Login username:** When you login to the intranet, you use your existing login username, ex: <code>**pthoeny**</code>. This name is normally passed to %WIKITOOLNAME% by the <code>**REMOTE\_USER**</code> environment variable, and used by internally by %WIKITOOLNAME%. Login usernames are maintained by your system administrator.
- **TWiki username:** Your name in [[WikiNotation]], ex: <code>**PeterThoeny**</code>, is recorded when you register using [[TWikiRegistration]]; doing so also generates a personal home page in the Main web.

%WIKITOOLNAME% can automatically map an intranet username to a TWiki username, provided that the username pair exists in the [[TWikiUsers]] topic. This is also handled automatically when you register.

> **_NOTE:_**
>
> **To correctly enter a [[WikiName]]**
>
> - your own or someone else's - be sure to include the Main web name in front of the Wiki username, followed by a period, and no spaces. Ex:
>
> <div>
>   <center><code><b>Main.WikiUsername</b></code> or <code><b>%MAINWEB%.WikiUsername</b></code></center>
> </div>
>
> This points
>
> <code>**WikiUser**</code>
>
> to the %WIKITOOLNAME%.Main web, where user registration pages are stored, no matter which web it's entered in. Without the web prefix, the name appears as a
>
> [[NewTopic]]
>
> everywhere but in the Main web.

-- [[PeterThoeny]] - 16 Mar 2001 <br /> -- [[MikeMannix]] - 29 Aug 2001
